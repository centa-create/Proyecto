{% extends 'base.html' %}
{% block title %}Favoritos | Tienda Virtual{% endblock %}
{% block head %}
<style>
    .wishlist-container {
        max-width: 800px;
        margin: 40px auto;
        background: rgba(35,39,47,0.98);
        border-radius: 1.5rem;
        box-shadow: 0 0 32px #fff8, 0 8px 32px #000a;
        padding: 2.5rem 2rem 2rem 2rem;
        border: 2.5px solid #fff;
    }
    .wishlist-title {
        font-weight: 900;
        font-size: 2.1rem;
        letter-spacing: 0.04em;
        text-align: left;
        margin-bottom: 1.5rem;
        background: linear-gradient(90deg, #fff 0%, #eaeaea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 16px #fff, 0 2px 24px #fff8;
    }
    .wishlist-list {
        list-style: none;
        padding: 0;
    }
    .wishlist-item {
        background: #23272f;
        border-radius: 1rem;
        margin-bottom: 1.1rem;
        padding: 1.1rem 1.5rem;
        box-shadow: 0 2px 8px 0 #fff2;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.08rem;
        border-left: 4px solid #fff;
    }
    .wishlist-item a {
        color: #fff;
        font-weight: 800;
        text-decoration: none;
        letter-spacing: 0.01em;
        transition: color 0.18s;
    }
    .wishlist-item a:hover {
        color: #fff;
        text-shadow: 0 0 8px #fff8;
    }
    .wishlist-item .product-price {
        background: linear-gradient(90deg, #fff 0%, #eaeaea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
        margin-left: 0.7rem;
        text-shadow: 0 0 8px #fff, 0 0 16px #fff8;
    }
    .btn-remove {
        border-radius: 8px;
        font-weight: 800;
        font-size: 1rem;
        padding: 0.4rem 1.1rem;
        border: 2px solid #fff;
        color: #23272f;
        background: linear-gradient(90deg, #fff 0%, #eaeaea 100%);
        box-shadow: 0 0 12px #fff8;
        transition: background 0.18s, color 0.18s, box-shadow 0.18s;
    }
    .btn-remove:hover {
        background: #23272f;
        color: #fff;
        box-shadow: 0 0 24px #fff, 0 0 16px #fff8;
        border: 2px solid #fff;
    }
    @media (max-width: 768px) {
        .wishlist-container {
            padding: 1rem;
        }
    }
</style>
{% endblock %}
{% block content %}
<div class="wishlist-container">
    <div class="wishlist-title">Mis Favoritos</div>
    {% if items %}
    <div class="mb-3">
      <label class="fw-bold">Comparte tu lista de deseos:</label>
      <input type="text" class="form-control" value="{{ share_url }}" readonly onclick="this.select();document.execCommand('copy');" style="max-width:400px;display:inline-block;">
      <small class="text-muted ms-2">Copia y comparte este enlace</small>
    </div>
    <ul class="wishlist-list mb-4">
      {% for item in items %}
      <li class="wishlist-item position-relative">
        {% if item.product.is_nuevo %}
          <span class="badge badge-glow-white position-absolute top-0 end-0 m-2" style="font-size:0.95em;z-index:3;" title="¡Nuevo!">Nuevo</span>
        {% endif %}
        {% if item.product.is_mas_vendido %}
          <span class="badge badge-glow-white position-absolute top-0 start-50 translate-middle-x m-2" style="font-size:0.95em;z-index:3;" title="Más vendido">★ Más vendido</span>
        {% endif %}
        <div>
          <a href="{{ url_for('catalog.product_detail', product_id=item.product_id) }}">{{ item.product.name }}</a>
            <span class="product-price">{{ (item.product.price * 4000)|int | string | replace(',', '.') }} COP</span>
        </div>
        <form method="post" action="{{ url_for('wishlist.remove_from_wishlist', product_id=item.product_id) }}" class="mb-0">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <button class="btn btn-danger btn-remove" title="Eliminar de favoritos">Eliminar</button>
        </form>
      </li>
      {% endfor %}
    </ul>
    {% else %}
      <div class="alert alert-info text-center">No tienes productos en tus favoritos.</div>
    {% endif %}
</div>
{% endblock %}
