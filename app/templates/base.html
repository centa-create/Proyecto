<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Eliminado sistema de tema claro/oscuro -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Tienda Virtual{% endblock %}</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='star-bg.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='change-theme-button.css') }}">
    <style>
        :root {
            --color-bg: #181818;
            --color-bg-light: #23272f;
            --color-text: #f5f5f5;
            --color-card: #23272f;
            --color-border: #fff;
            --color-glow: #fff8;
        }
        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #181818;
                --color-bg-light: #23272f;
                --color-text: #f5f5f5;
                --color-card: #23272f;
                --color-border: #fff;
                --color-glow: #fff8;
            }
            body {
                background: linear-gradient(120deg, #111 0%, #222 100%), url('https://www.transparenttextures.com/patterns/asfalt-light.png');
                color: var(--color-text);
            }
        }
        @media (prefers-color-scheme: light) {
            :root {
                --color-bg: #f5f5f5;
                --color-bg-light: #fff;
                --color-text: #181818;
                --color-card: #fff;
                --color-border: #23272f;
                --color-glow: #23272f22;
            }
            body {
                background: linear-gradient(120deg, #fff 0%, #eaeaea 100%);
                color: var(--color-text);
            }
            .navbar, .container, .product-card {
                background: var(--color-bg-light) !important;
                color: var(--color-text) !important;
            }
            .product-card {
                border: 2px solid var(--color-border) !important;
                box-shadow: 0 0 24px 0 var(--color-glow), 0 4px 24px #0002 !important;
            }
        }
        /* Glow y degradado blanco global */
        .glow-white {
            background: linear-gradient(90deg, #fff 0%, #eaeaea 100%) !important;
            color: #23272f !important;
            box-shadow: 0 0 16px #fff8, 0 2px 8px #0005;
            border: 2px solid #fff !important;
            font-weight: 800;
            text-shadow: 0 0 8px #fff, 0 0 16px #fff8;
        }
        .badge-glow-white, .badge.bg-warning, .badge.bg-info, .badge.bg-danger {
            background: linear-gradient(90deg, #fff 0%, #eaeaea 100%) !important;
            color: #23272f !important;
            font-weight: 800;
            box-shadow: 0 0 8px #fff8;
            border: 1.5px solid #fff;
            text-shadow: 0 0 8px #fff, 0 0 16px #fff8;
        }
        .alert-info, .alert-warning, .alert-danger, .alert-success {
            background: linear-gradient(90deg, #fff 0%, #eaeaea 100%) !important;
            color: #23272f !important;
            border: 2px solid #fff !important;
            font-weight: 700;
            box-shadow: 0 0 12px #fff8;
            text-shadow: 0 0 8px #fff8;
        }
        .btn, .btn-outline-primary, .btn-outline-info, .btn-outline-success, .btn-outline-warning, .btn-outline-secondary, .btn-outline-dark, .btn-primary {
            border-radius: 8px !important;
            font-weight: 800 !important;
            font-size: 1rem !important;
            padding: 0.5rem 1.2rem !important;
            border: 2px solid #fff !important;
            color: #23272f !important;
            background: linear-gradient(90deg, #fff 0%, #eaeaea 100%) !important;
            box-shadow: 0 0 12px #fff8 !important;
            transition: background 0.18s, color 0.18s, box-shadow 0.18s, transform 0.12s !important;
            margin-bottom: 0.5rem;
        }
        .btn:active {
            transform: scale(0.97);
            box-shadow: 0 0 32px 8px var(--color-glow), 0 2px 8px #0005 !important;
        }
        .btn:focus {
            outline: 2px solid #fff;
            outline-offset: 2px;
            box-shadow: 0 0 0 4px #fff8 !important;
        }
        .btn:hover, .btn-outline-primary:hover, .btn-outline-info:hover, .btn-outline-success:hover, .btn-outline-warning:hover, .btn-outline-secondary:hover, .btn-outline-dark:hover, .btn-primary:hover {
            background: #23272f !important;
            color: #fff !important;
            box-shadow: 0 0 24px #fff, 0 0 16px #fff8 !important;
            border: 2px solid #fff !important;
        }
        input, select, textarea {
            transition: border 0.18s, box-shadow 0.18s;
            border-radius: 8px;
            border: 2px solid var(--color-border);
            background: var(--color-bg-light);
            color: var(--color-text);
        }
        input:focus, select:focus, textarea:focus {
            border-color: #fff;
            box-shadow: 0 0 8px #fff8;
            outline: none;
        }
        th, .table th {
            background: linear-gradient(90deg, #fff 0%, #eaeaea 100%) !important;
            color: #222 !important;
            font-weight: 800;
            text-shadow: none;
        }
        .table, .table-bordered {
            border: none;
            border-radius: 16px;
            overflow: hidden;
            background: rgba(255,255,255,0.92);
            box-shadow: 0 4px 24px 0 #0002, 0 1.5px 8px #fff3;
        }
        .table thead th {
            background: linear-gradient(90deg, #f5f5f5 0%, #eaeaea 100%) !important;
            color: #222 !important;
            font-weight: 800;
            border-bottom: 2.5px solid #2222 !important;
            letter-spacing: 0.5px;
        }
        .table tbody tr {
            transition: background 0.18s, box-shadow 0.18s;
        }
        .table tbody tr:hover {
            background: #f0f4fa !important;
            box-shadow: 0 2px 12px #0001;
        }
        .table td, .table th {
            padding: 0.85rem 1.2rem !important;
            vertical-align: middle;
        }
        .cart-total {
            font-size: 1.18rem;
            font-weight: 700;
            color: #222;
            background: #f5f5f5;
            border-radius: 8px;
            padding: 0.7rem 1.2rem;
            margin-bottom: 1.2rem;
            box-shadow: 0 1.5px 8px #0001;
            display: inline-block;
        }
            background: #23272f !important;
            color: #fff !important;
        }
        .fade-in {
            animation: fadeIn 1.2s cubic-bezier(.4,2,.3,1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: none; }
        }
        /* Clases personalizadas para glow blanco */
        .bg-glow-white {
            background: #f5f5f5 !important;
            color: #222 !important;
            box-shadow: 0 0 16px 4px rgba(245,245,245,0.7), 0 2px 8px #0005;
            border-radius: 8px;
            font-weight: 700;
            border: none;
        }
        .text-glow-white {
            color: #f5f5f5 !important;
            text-shadow: 0 0 8px #f5f5f5;
        }
        .badge-glow-white {
            background: #f5f5f5 !important;
            color: #222 !important;
            box-shadow: 0 0 8px #f5f5f5;
        }
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap');
        body {
            background: linear-gradient(120deg, #111 0%, #222 100%), url('https://www.transparenttextures.com/patterns/asfalt-light.png');
            min-height: 100vh;
            color: #f5f5f5;
            font-family: 'Montserrat', Arial, sans-serif;
            letter-spacing: 0.01em;
            background-blend-mode: overlay;
        }
        /* Animación pulse para borde neón y tarjetas de producto */
        @keyframes pulse-neon {
            0% { box-shadow: 0 0 32px 8px rgba(245,245,245,0.7), 0 4px 32px #000a; }
            50% { box-shadow: 0 0 48px 16px #f5f5f5, 0 4px 32px #000a; }
            100% { box-shadow: 0 0 32px 8px rgba(245,245,245,0.7), 0 4px 32px #000a; }
        }
        .product-card {
            border: 2px solid #f5f5f5;
            border-radius: 1.2rem;
            box-shadow: 0 0 24px 0 rgba(245,245,245,0.3), 0 4px 24px #000a;
            transition: transform 0.18s cubic-bezier(.4,2,.3,1), box-shadow 0.18s, border-color 0.18s;
            margin-bottom: 2rem;
            background: #181818;
            position: relative;
            overflow: hidden;
            animation: pulse-neon 1.5s infinite;
            cursor: pointer;
        }
        .product-card:hover {
            transform: translateY(-15px) scale(1.06) rotate(-1deg);
            box-shadow: 0 0 64px 16px #f5f5f5, 0 8px 32px #000a;
            border-color: #fff;
            animation-play-state: paused;
        }
        .product-card:active {
            animation-play-state: paused;
            transform: scale(0.97) translateY(2px) rotate(1deg);
            box-shadow: 0 0 24px 4px rgba(245,245,245,0.7), 0 2px 16px #000a;
        }
        .product-card.destacado {
            border: 3px solid #f5f5f5;
            z-index: 2;
        }
        .navbar {
            background: #111;
            border-bottom: 2px solid #fff2;
            box-shadow: 0 2px 12px 0 #0008;
        }
        .navbar .navbar-brand {
            font-weight: 900;
            font-size: 2rem;
            letter-spacing: 0.2em;
            color: #fff !important;
            text-shadow: 2px 2px 8px #000a;
        }
        .navbar .nav-link {
            color: #f5f5f5 !important;
            font-weight: 700;
            margin-right: 0.7rem;
            transition: color 0.2s;
        }
        .navbar .nav-link:hover, .navbar .nav-link.active {
            color: #f5f5f5 !important;
            text-shadow: 0 0 8px #f5f5f5;
        }
        .container {
            background: #181818cc;
            border-radius: 1.2rem;
            box-shadow: 0 4px 32px 0 #000a;
            padding: 2.5rem 2rem 2rem 2rem;
            margin-top: 2.5rem;
        }
        .footer {
            background: #111;
            color: #fff;
            padding: 1rem 0;
            text-align: center;
            margin-top: 2rem;
            border-top: 2px solid #fff2;
            letter-spacing: 0.1em;
        }
        .alert {
            border-radius: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.7em;
        }
        .alert-success::before {
            content: '\2714';
            color: #f5f5f5;
            font-size: 1.3em;
            filter: drop-shadow(0 0 4px #f5f5f5);
        }
        .alert-danger::before, .alert-error::before {
            content: '\26A0';
            color: #ff2d55;
            font-size: 1.3em;
            filter: drop-shadow(0 0 4px #ff2d55);
        }
        .alert-info::before {
            content: '\2139';
            color: #f5f5f5;
            font-size: 1.2em;
            filter: drop-shadow(0 0 4px #f5f5f5);
        }
        /* Loader neón */
        .neon-loader {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 180px;
        }
        .neon-spinner {
            width: 56px;
            height: 56px;
            border: 6px solid #f5f5f544;
            border-top: 6px solid #f5f5f5;
            border-radius: 50%;
            animation: spin-neon 1s linear infinite;
            box-shadow: 0 0 24px #f5f5f5;
        }
        @keyframes spin-neon {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        }
        /* Botones urbanos */
        .btn, .btn-primary, .btn-success, .btn-danger, .btn-warning {
            border-radius: 8px;
            font-weight: 800;
            letter-spacing: 0.05em;
            box-shadow: 0 2px 8px #0005;
            border: none;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s, transform 0.18s cubic-bezier(.4,2,.3,1);
            position: relative;
            overflow: hidden;
        }
        .btn:active {
            transform: scale(0.96) translateY(2px) rotate(-1deg);
            box-shadow: 0 0 16px #f5f5f5, 0 2px 8px #0005;
        }
        .btn:hover {
            box-shadow: 0 0 24px #f5f5f5, 0 2px 8px #0005;
        }
        .btn[title]:hover::after {
            content: attr(title);
            position: absolute;
            left: 50%;
            top: -2.2em;
            transform: translateX(-50%);
            background: #111;
            color: #f5f5f5;
            padding: 0.3em 0.8em;
            border-radius: 0.6em;
            font-size: 0.95em;
            white-space: nowrap;
            box-shadow: 0 0 8px #f5f5f5;
            z-index: 10;
            pointer-events: none;
            opacity: 0.95;
        }
        }
        .btn-primary {
            background: #f5f5f5 !important;
            color: #222 !important;
            box-shadow: 0 0 16px 4px rgba(245,245,245,0.7), 0 2px 8px #0005;
            border-radius: 8px;
            font-weight: 800;
            border: none;
        }
        .btn-primary:hover {
            background: #fff !important;
            color: #222 !important;
            box-shadow: 0 0 24px #f5f5f5, 0 2px 8px #0005;
        }
        .btn-success {
            background: #f5f5f5 !important;
            color: #222 !important;
            border: 2px solid #f5f5f5;
            box-shadow: 0 0 16px 4px rgba(245,245,245,0.7), 0 2px 8px #0005;
        }
        .btn-success:hover {
            background: #fff !important;
            color: #222 !important;
            box-shadow: 0 0 24px #f5f5f5, 0 2px 8px #0005;
        }
        .btn-danger {
            background: #ff2d55;
            color: #fff;
        }
        .btn-danger:hover {
            background: #fff;
            color: #ff2d55;
        }
        .form-control, .form-select {
            background: #222;
            color: #fff;
            border: 1.5px solid #fff2;
            border-radius: 0.7rem;
        }
        .form-control:focus, .form-select:focus {
            background: #181818;
            color: #fff;
            border-color: #f5f5f5;
            box-shadow: 0 0 8px #f5f5f5;
        }
        label, .form-label {
            color: #fff;
            font-weight: 700;
        }
        ::placeholder {
            color: #bbb;
            opacity: 1;
        }
        /* Scrollbar urbana */
        ::-webkit-scrollbar {
            width: 10px;
            background: #111;
        }
        ::-webkit-scrollbar-thumb {
            background: #f5f5f5;
            border-radius: 8px;
        }
        /* Microinteracciones y feedback visual */
        .btn, .btn-outline-primary, .btn-outline-info, .btn-outline-success, .btn-outline-warning, .btn-outline-secondary, .btn-outline-dark, .btn-primary {
            transition: background 0.18s, color 0.18s, box-shadow 0.18s, transform 0.12s !important;
        }
        .btn:active {
            transform: scale(0.97);
            box-shadow: 0 0 32px 8px var(--color-glow), 0 2px 8px #0005 !important;
        }
        .btn:focus {
            outline: 2px solid #fff;
            outline-offset: 2px;
            box-shadow: 0 0 0 4px #fff8 !important;
        }
        input, select, textarea {
            transition: border 0.18s, box-shadow 0.18s;
            border-radius: 8px;
            border: 2px solid var(--color-border);
            background: var(--color-bg-light);
            color: var(--color-text);
        }
        input:focus, select:focus, textarea:focus {
            border-color: #fff;
            box-shadow: 0 0 8px #fff8;
            outline: none;
        }
        /* Feedback visual en formularios */
        .form-control:invalid {
            border-color: #e74c3c !important;
            box-shadow: 0 0 8px #e74c3c88 !important;
        }
        .form-control:valid {
            border-color: #2ecc40 !important;
            box-shadow: 0 0 8px #2ecc4088 !important;
        }
        /* Accesibilidad: alto contraste y focus visible */
        .high-contrast {
            filter: contrast(1.3) brightness(1.1);
        }
        [aria-live] {
            outline: 2px dashed #fff;
            outline-offset: 2px;
        }
        /* Mejoras para lectores de pantalla */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }
    </style>
    <!-- SEO y PWA -->
    <meta name="description" content="SAMMS.FO - Tu tienda virtual de productos destacados, sneakers y moda urbana. Compra fácil, seguro y rápido.">
    <meta name="keywords" content="sneakers, tienda, ecommerce, moda, ofertas, productos, carrito, pedidos, reviews, favoritos">
    <meta name="theme-color" content="#181818">
            <!-- Rich Snippets SEO -->
            <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "Organization",
                "name": "SAMMS.FO",
                "url": "https://samms.fo/",
                "logo": "https://samms.fo/static/logo.png"
            }
            </script>
            <script type="application/ld+json">
            {
                "@context": "https://schema.org/",
                "@type": "Product",
                "name": "Zapatilla AirMax",
                "image": [
                    "https://samms.fo/static/product_images/airmax.jpg"
                ],
                "description": "Zapatilla deportiva AirMax original.",
                "brand": {
                    "@type": "Brand",
                    "name": "Nike"
                }
            }
            </script>
    <meta property="og:title" content="SAMMS.FO - Tienda Virtual" />
    <meta property="og:description" content="Descubre los mejores productos y ofertas en SAMMS.FO. ¡Compra fácil y seguro!" />
    <meta property="og:image" content="{{ url_for('static', filename='logo.png') }}" />
    <meta property="og:type" content="website" />
    <link rel="manifest" href="/static/manifest.json">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='logo.png') }}">
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/static/service-worker.js');
        });
      }
    </script>
    {% block head %}{% endblock %}
</head>
<body role="main" tabindex="0">
        <div class="stars"></div>
        <!-- Botón avanzado de cambio de tema -->
        <div style="position:fixed;top:1.2rem;right:1.2rem;z-index:2000;">
            <button aria-pressed="false" class="toggle" title="Cambiar tema">
                <div class="socket"><div class="socket-shadow"></div></div>
                <div class="face">
                    <div class="face-shadow"></div>
                    <div class="face-glowdrop"></div>
                    <div class="face-plate"></div>
                    <div class="face-shine"><div class="face-shine-shadow"></div></div>
                    <div class="face-glows"><div></div></div>
                    <svg class="glow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path class="glow-path" d="M9.8815 1.36438L9.88141 1.36429C9.70639 1.18942 9.48342 1.07041 9.24073 1.02235C8.99803 0.974286 8.74653 0.999323 8.51808 1.09429L8.51753 1.09452C4.54484 2.75146 1.75 6.6732 1.75 11.25C1.75 17.3262 6.67489 22.25 12.75 22.25C14.9217 22.2501 17.0448 21.6075 18.852 20.4032C20.6591 19.1989 22.0695 17.4868 22.9055 15.4825L22.9058 15.4818C23.0007 15.2532 23.0256 15.0015 22.9774 14.7587C22.9291 14.5159 22.8099 14.2929 22.6348 14.118C22.4597 13.9431 22.2366 13.8241 21.9937 13.7761C21.7509 13.7281 21.4993 13.7533 21.2708 13.8484L21.2707 13.8485C20.2346 14.2801 19.1231 14.5016 18.0007 14.5H18C15.7457 14.5 13.5837 13.6045 11.9896 12.0104C10.3955 10.4163 9.5 8.25433 9.5 5.99999L9.5 5.99927C9.49838 4.8769 9.71983 3.76541 10.1515 2.72938C10.2468 2.50072 10.2721 2.24888 10.224 2.00584C10.1759 1.76281 10.0567 1.53954 9.8815 1.36438Z" stroke-width="0"/>
                    </svg>
                    <svg class="trail-holder" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path class="trail" d="M9.8815 1.36438L9.88141 1.36429C9.70639 1.18942 9.48342 1.07041 9.24073 1.02235C8.99803 0.974286 8.74653 0.999323 8.51808 1.09429L8.51753 1.09452C4.54484 2.75146 1.75 6.6732 1.75 11.25C1.75 17.3262 6.67489 22.25 12.75 22.25C14.9217 22.2501 17.0448 21.6075 18.852 20.4032C20.6591 19.1989 22.0695 17.4868 22.9055 15.4825L22.9058 15.4818C23.0007 15.2532 23.0256 15.0015 22.9774 14.7587C22.9291 14.5159 22.8099 14.2929 22.6348 14.118C22.4597 13.9431 22.2366 13.8241 21.9937 13.7761C21.7509 13.7281 21.4993 13.7533 21.2708 13.8484L21.2707 13.8485C20.2346 14.2801 19.1231 14.5016 18.0007 14.5H18C15.7457 14.5 13.5837 13.6045 11.9896 12.0104C10.3955 10.4163 9.5 8.25433 9.5 5.99999L9.5 5.99927C9.49838 4.8769 9.71983 3.76541 10.1515 2.72938C10.2468 2.50072 10.2721 2.24888 10.224 2.00584C10.1759 1.76281 10.0567 1.53954 9.8815 1.36438Z" stroke="#2CC6FE" stroke-linecap="round" stroke-dasharray="7 80" stroke-dashoffset="40"/>
                    </svg>
                    <svg class="main" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <path class="outline" class="stroke" d="M9.8815 1.36438L9.88141 1.36429C9.70639 1.18942 9.48342 1.07041 9.24073 1.02235C8.99803 0.974286 8.74653 0.999323 8.51808 1.09429L8.51753 1.09452C4.54484 2.75146 1.75 6.6732 1.75 11.25C1.75 17.3262 6.67489 22.25 12.75 22.25C14.9217 22.2501 17.0448 21.6075 18.852 20.4032C20.6591 19.1989 22.0695 17.4868 22.9055 15.4825L22.9058 15.4818C23.0007 15.2532 23.0256 15.0015 22.9774 14.7587C22.9291 14.5159 22.8099 14.2929 22.6348 14.118C22.4597 13.9431 22.2366 13.8241 21.9937 13.7761C21.7509 13.7281 21.4993 13.7533 21.2708 13.8484L21.2707 13.8485C20.2346 14.2801 19.1231 14.5016 18.0007 14.5H18C15.7457 14.5 13.5837 13.6045 11.9896 12.0104C10.3955 10.4163 9.5 8.25433 9.5 5.99999L9.5 5.99927C9.49838 4.8769 9.71983 3.76541 10.1515 2.72938C10.2468 2.50072 10.2721 2.24888 10.224 2.00584C10.1759 1.76281 10.0567 1.53954 9.8815 1.36438Z" fill="black" stroke="black" stroke-width="2"/>
                            <path mask="url(#fade)" class="outline-shadow" class="stroke" filter="url(#outer-shadow)" d="M9.8815 1.36438L9.88141 1.36429C9.70639 1.18942 9.48342 1.07041 9.24073 1.02235C8.99803 0.974286 8.74653 0.999323 8.51808 1.09429L8.51753 1.09452C4.54484 2.75146 1.75 6.6732 1.75 11.25C1.75 17.3262 6.67489 22.25 12.75 22.25C14.9217 22.2501 17.0448 21.6075 18.852 20.4032C20.6591 19.1989 22.0695 17.4868 22.9055 15.4825L22.9058 15.4818C23.0007 15.2532 23.0256 15.0015 22.9774 14.7587C22.9291 14.5159 22.8099 14.2929 22.6348 14.118C22.4597 13.9431 22.2366 13.8241 21.9937 13.7761C21.7509 13.7281 21.4993 13.7533 21.2708 13.8484L21.2707 13.8485C20.2346 14.2801 19.1231 14.5016 18.0007 14.5H18C15.7457 14.5 13.5837 13.6045 11.9896 12.0104C10.3955 10.4163 9.5 8.25433 9.5 5.99999L9.5 5.99927C9.49838 4.8769 9.71983 3.76541 10.1515 2.72938C10.2468 2.50072 10.2721 2.24888 10.224 2.00584C10.1759 1.76281 10.0567 1.53954 9.8815 1.36438Z" fill="black" stroke="black" stroke-width="2"/>
                        </g>
                        <path class="trail" d="M9.8815 1.36438L9.88141 1.36429C9.70639 1.18942 9.48342 1.07041 9.24073 1.02235C8.99803 0.974286 8.74653 0.999323 8.51808 1.09429L8.51753 1.09452C4.54484 2.75146 1.75 6.6732 1.75 11.25C1.75 17.3262 6.67489 22.25 12.75 22.25C14.9217 22.2501 17.0448 21.6075 18.852 20.4032C20.6591 19.1989 22.0695 17.4868 22.9055 15.4825L22.9058 15.4818C23.0007 15.2532 23.0256 15.0015 22.9774 14.7587C22.9291 14.5159 22.8099 14.2929 22.6348 14.118C22.4597 13.9431 22.2366 13.8241 21.9937 13.7761C21.7509 13.7281 21.4993 13.7533 21.2708 13.8484L21.2707 13.8485C20.2346 14.2801 19.1231 14.5016 18.0007 14.5H18C15.7457 14.5 13.5837 13.6045 11.9896 12.0104C10.3955 10.4163 9.5 8.25433 9.5 5.99999L9.5 5.99927C9.49838 4.8769 9.71983 3.76541 10.1515 2.72938C10.2468 2.50072 10.2721 2.24888 10.224 2.00584C10.1759 1.76281 10.0567 1.53954 9.8815 1.36438Z" stroke="#2CC6FE" stroke-linecap="round"/>
                        <!-- Inner piece -->
                        <g class="inner">
                            <path class="inner-face" fill-rule="evenodd" clip-rule="evenodd" d="M9.528 1.71799C9.63312 1.82308 9.70465 1.95704 9.73349 2.10286C9.76234 2.24868 9.7472 2.39979 9.69 2.53699C9.23282 3.6342 8.99828 4.81134 9 5.99999C9 8.38694 9.94821 10.6761 11.636 12.3639C13.3239 14.0518 15.6131 15 18 15C19.1886 15.0017 20.3658 14.7672 21.463 14.31C21.6001 14.2529 21.7511 14.2378 21.8968 14.2666C22.0425 14.2954 22.1763 14.3668 22.2814 14.4717C22.3865 14.5767 22.458 14.7105 22.487 14.8562C22.5159 15.0018 22.501 15.1528 22.444 15.29C21.646 17.2032 20.2997 18.8376 18.5747 19.9871C16.8496 21.1367 14.823 21.7501 12.75 21.75C6.951 21.75 2.25 17.05 2.25 11.25C2.25 6.88199 4.917 3.13799 8.71 1.55599C8.84707 1.49901 8.99797 1.48399 9.14359 1.51282C9.28921 1.54166 9.42299 1.61307 9.528 1.71799Z"/>
                            <path mask="url(#inner-fade)" class="inner-bg" fill-rule="evenodd" clip-rule="evenodd" d="M9.528 1.71799C9.63312 1.82308 9.70465 1.95704 9.73349 2.10286C9.76234 2.24868 9.7472 2.39979 9.69 2.53699C9.23282 3.6342 8.99828 4.81134 9 5.99999C9 8.38694 9.94821 10.6761 11.636 12.3639C13.3239 14.0518 15.6131 15 18 15C19.1886 15.0017 20.3658 14.7672 21.463 14.31C21.6001 14.2529 21.7511 14.2378 21.8968 14.2666C22.0425 14.2954 22.1763 14.3668 22.2814 14.4717C22.3865 14.5767 22.458 14.7105 22.487 14.8562C22.5159 15.0018 22.501 15.1528 22.444 15.29C21.646 17.2032 20.2997 18.8376 18.5747 19.9871C16.8496 21.1367 14.823 21.7501 12.75 21.75C6.951 21.75 2.25 17.05 2.25 11.25C2.25 6.88199 4.917 3.13799 8.71 1.55599C8.84707 1.49901 8.99797 1.48399 9.14359 1.51282C9.28921 1.54166 9.42299 1.61307 9.528 1.71799Z"/>
                            <g class="inner-shadow" filter="url(#inner-shadow)" mask="url(#fade)"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.528 1.71799C9.63312 1.82308 9.70465 1.95704 9.73349 2.10286C9.76234 2.24868 9.7472 2.39979 9.69 2.53699C9.23282 3.6342 8.99828 4.81134 9 5.99999C9 8.38694 9.94821 10.6761 11.636 12.3639C13.3239 14.0518 15.6131 15 18 15C19.1886 15.0017 20.3658 14.7672 21.463 14.31C21.6001 14.2529 21.7511 14.2378 21.8968 14.2666C22.0425 14.2954 22.1763 14.3668 22.2814 14.4717C22.3865 14.5767 22.458 14.7105 22.487 14.8562C22.5159 15.0018 22.501 15.1528 22.444 15.29C21.646 17.2032 20.2997 18.8376 18.5747 19.9871C16.8496 21.1367 14.823 21.7501 12.75 21.75C6.951 21.75 2.25 17.05 2.25 11.25C2.25 6.88199 4.917 3.13799 8.71 1.55599C8.84707 1.49901 8.99797 1.48399 9.14359 1.51282C9.28921 1.54166 9.42299 1.61307 9.528 1.71799Z" fill="hsl(0 0% 10% / .01)"/></g>
                        </g>
                        <defs>
                            <filter id="inner-shadow" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dx="0.4" dy="0.5"/><feGaussianBlur stdDeviation="0.1"/><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"/><feBlend mode="normal" in2="shape" result="effect1_innerShadow_731_4"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dx="0.3" dy="-0.5"/><feGaussianBlur stdDeviation="0.1"/><feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"/><feBlend mode="normal" in2="effect1_innerShadow_731_4" result="effect2_innerShadow_731_4"/></filter>
                            <linearGradient id="fade-gradient" x1="0%" y1="0%" x2="100%" y2="0%" gradientTransform="rotate(45)" gradientUnits="userSpaceOnUse"><stop offset="0.45" stop-color="white" stop-opacity="0"/><stop offset="0.75" stop-color="white" stop-opacity="0.75"/><stop offset="0.95" stop-color="white" stop-opacity="0.5"/><stop offset="1" stop-color="white" stop-opacity="0.35"/></linearGradient>
                            <linearGradient id="inner-fade-gradient" x1="0%" y1="0%" x2="100%" y2="0%" gradientTransform="rotate(45)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="transparent" stop-opacity="0"/><stop offset="0.75" stop-color="white" stop-opacity="1"/></linearGradient>
                            <mask id="fade"><rect width="100%" height="100%" fill="url(#fade-gradient)"/></mask>
                            <mask id="inner-fade"><rect width="100%" height="100%" fill="url(#inner-fade-gradient)"/></mask>
                            <filter id="outer-shadow" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="0.5" dx="-0.05"/><feGaussianBlur stdDeviation="0.25"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_731_4"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_731_4" result="shape"/></filter>
                        </defs>
                    </svg>
                </div>
                <span class="sr-only">Toggle Theme</span>
            </button>
        </div>
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand d-flex align-items-center gap-2" href="/">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo SAMMS.FO" height="48" style="filter: drop-shadow(0 0 16px #f5f5f5);border-radius:50%;background:#fff;object-fit:cover;" title="Ir al inicio">
            <span class="ms-2">SAMMS.FO</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                {% if current_user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link" href="/client/feed" title="Ir al inicio"><span class="d-none d-md-inline">Inicio</span> <span class="d-inline d-md-none" style="font-size:1.2em;">🏠</span></a></li>
                    <li class="nav-item"><a class="nav-link" href="/catalog" title="Ver catálogo"><span class="d-none d-md-inline">Catálogo</span> <span class="d-inline d-md-none" style="font-size:1.2em;">📦</span></a></li>
                    <li class="nav-item position-relative">
                        <a class="nav-link" href="/cart" title="Carrito de compras">
                            <span class="d-none d-md-inline">🛒 Carrito</span>
                            <span class="d-inline d-md-none" style="font-size:1.2em;">🛒</span>
                            <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-glow-white" style="font-size:0.85em;">0</span>
                        </a>
                    </li>
                    <li class="nav-item position-relative">
                        <a class="nav-link" href="/wishlist" title="Favoritos">
                            <span class="d-none d-md-inline">&#10084; Favoritos</span>
                            <span class="d-inline d-md-none" style="font-size:1.2em;">&#10084;</span>
                            {% if session['wishlist_count'] is defined and session['wishlist_count'] > 0 %}
                                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-glow-white" style="font-size:0.85em;">{{ session['wishlist_count'] }}</span>
                            {% endif %}
                        </a>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/orders/history" title="Ver pedidos"><span class="d-none d-md-inline">Pedidos</span> <span class="d-inline d-md-none" style="font-size:1.2em;">📦</span></a></li>
                    <li class="nav-item"><a class="nav-link" href="/client/profile" title="Mi perfil">
                        <span class="d-none d-md-inline">Perfil</span>
                        <span class="d-inline d-md-none" style="font-size:1.2em;">👤</span>
                        {% if current_user.is_authenticated and current_user.is_frecuente %}
                            <span class="badge badge-glow-white ms-1" style="font-size:0.85em;" title="Usuario frecuente">★</span>
                        {% endif %}
                    </a></li>
                    {% if current_user.role.name == 'ADMIN' %}
                        <li class="nav-item"><a class="nav-link" href="/admin/dashboard">Admin</a></li>
                    {% endif %}
                    <li class="nav-item"><a class="nav-link" href="/logout">Salir</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="/">Iniciar sesión</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
<div class="container mt-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
</div>
<footer class="footer">
    <div class="container">
        &copy; 2025 Tienda Virtual S A M M S . F O
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/change-theme-button.js') }}"></script>
<script>
// Efecto ripple en botones
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('button, .btn').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
            let ripple = document.createElement('span');
            ripple.className = 'ripple';
            ripple.style.left = (e.offsetX - 10) + 'px';
            ripple.style.top = (e.offsetY - 10) + 'px';
            this.appendChild(ripple);
            setTimeout(() => ripple.remove(), 600);
        });
    });
});
// Animación de validación en formularios
document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', function(e) {
        if (!form.checkValidity()) {
            form.classList.add('was-validated');
            e.preventDefault();
            e.stopPropagation();
        }
    }, false);
});
</script>
<style>
.ripple {
    position: absolute;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    background: rgba(255,255,255,0.7);
    pointer-events: none;
    animation: ripple-effect 0.6s linear;
    z-index: 10;
}
@keyframes ripple-effect {
    to {
        transform: scale(8);
        opacity: 0;
    }
}
button, .btn { position: relative; overflow: hidden; }
.was-validated :invalid { box-shadow: 0 0 8px #ff4c4c, 0 0 2px #fff; }
.was-validated :valid { box-shadow: 0 0 8px #4cff4c, 0 0 2px #fff; }
</style>
<script>
async function updateCartCount() {
    try {
        const res = await fetch("/api/cart/");
        const data = await res.json();
        const count = data.items.reduce((acc, item) => acc + item.quantity, 0);
        const cartCountElem = document.getElementById("cartCount");
        if (cartCountElem) {
            cartCountElem.textContent = count;
            cartCountElem.style.display = count > 0 ? "inline-block" : "none";
        }
    } catch (e) {}
}
window.addEventListener('DOMContentLoaded', updateCartCount);
</script>
<script>
// Generar estrellas aleatorias
const starsContainer = document.querySelector('.stars');
if (starsContainer) {
    for (let i = 0; i < 120; i++) {
        const star = document.createElement('span');
        star.style.top = Math.random() * 100 + 'vh';
        star.style.left = Math.random() * 100 + 'vw';
        star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
        star.style.opacity = Math.random() * 0.7 + 0.3;
        star.style.animationDuration = (Math.random() * 2 + 1) + 's';
        starsContainer.appendChild(star);
    }
}
// Contador global del carrito
async function updateCartCount() {
    try {
        const res = await fetch("/api/cart/");
        const data = await res.json();
        const count = data.items.reduce((acc, item) => acc + item.quantity, 0);
        const cartCountElem = document.getElementById("cartCount");
        if (cartCountElem) {
            cartCountElem.textContent = count;
            cartCountElem.style.display = count > 0 ? "inline-block" : "none";
        }
    } catch (e) {}
}
window.addEventListener('DOMContentLoaded', updateCartCount);
</script>
<script>
// Notificaciones Push básicas (ejemplo)
if ('Notification' in window && 'serviceWorker' in navigator) {
  function askNotificationPermission() {
    if (Notification.permission === 'default') {
      Notification.requestPermission();
    }
  }
  window.addEventListener('load', askNotificationPermission);
  function showTestNotification() {
    if (Notification.permission === 'granted') {
      navigator.serviceWorker.getRegistration().then(function(reg) {
        if (reg) {
          reg.showNotification('¡Bienvenido a SAMMS.FO!', {
            body: 'Activa las notificaciones para recibir ofertas y novedades.',
            icon: '/static/logo.png',
            vibrate: [100, 50, 100]
          });
        }
      });
    }
  }
  // Botón flotante para probar notificaciones
  document.addEventListener('DOMContentLoaded', function() {
    var btn = document.createElement('button');
    btn.innerText = '🔔';
    btn.title = 'Probar notificación push';
    btn.style.position = 'fixed';
    btn.style.bottom = '24px';
    btn.style.right = '24px';
    btn.style.zIndex = '9999';
    btn.style.background = 'linear-gradient(90deg,#fff,#eaeaea)';
    btn.style.color = '#23272f';
    btn.style.border = '2px solid #fff';
    btn.style.borderRadius = '50%';
    btn.style.width = '48px';
    btn.style.height = '48px';
    btn.style.fontSize = '2rem';
    btn.style.boxShadow = '0 0 16px #fff8';
    btn.style.cursor = 'pointer';
    btn.onclick = showTestNotification;
    document.body.appendChild(btn);
  });
}
</script>
{% block scripts %}{% endblock %}
</body>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="{{ url_for('static', filename='js/socketio-notify.js') }}"></script>
<script>
// Notificaciones push en tiempo real (simulado)
if (window.Notification && Notification.permission === 'granted') {
    setInterval(async function() {
        try {
            const resp = await fetch('/notificaciones/api/check');
            const data = await resp.json();
            if (data.new) {
                new Notification('¡Tienes una nueva notificación!', { body: data.mensaje });
                // Marcar como leída automáticamente
                await fetch(`/notificaciones/marcar_leida/${data.id}`, {method:'POST'});
            }
        } catch (e) {}
    }, 10000); // cada 10 segundos
}
</script>
</html>
